<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Premium Birthday Wish ‚Äî Live Animation</title>

<!-- Lottie -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js"></script>
<!-- confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<!-- simple typing (tiny) -->
<style>
:root{
  --bg:#fff6fb;
  --card:#ffffff;
  --accent:#ff4da6;
  --muted:#6b6b6b;
  --radius:18px;
}
*{box-sizing:border-box;font-family:Inter, system-ui, Arial;}
body{margin:0; background:linear-gradient(180deg,var(--bg),#fff); display:flex; align-items:center; justify-content:center; min-height:100vh; padding:20px;}
.card{width:980px; max-width:96vw; background:var(--card); border-radius:var(--radius); box-shadow:0 12px 40px rgba(40,20,60,0.08); display:flex; overflow:hidden;}
.left{width:52%; min-height:420px; padding:28px; background:linear-gradient(135deg,#fff,#fff3fb); display:flex; flex-direction:column; align-items:center; justify-content:center;}
.right{width:48%; padding:24px; display:flex; flex-direction:column; gap:12px;}
h1{margin:0; font-size:22px; color:#2b1830;}
.small{color:var(--muted); font-size:13px;}
.input-row{display:flex; gap:8px; margin-top:12px;}
input[type="text"]{padding:10px 12px; border-radius:10px; border:1px solid #eee; min-width:220px;}
.btn{padding:8px 12px; border-radius:10px; border:none; cursor:pointer;}
.primary{background:var(--accent); color:white;}
.ghost{background:transparent; border:1px dashed #ddd;}
.wish-box{margin-top:12px; padding:12px; border-radius:12px; background:linear-gradient(180deg,#fff,#fff0f7); min-height:120px;}
.actions{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;}
.small-btn{padding:6px 10px; border-radius:8px; border:none; cursor:pointer;}
.share{background:#25D366; color:white;}
.copy{background:#333; color:white;}
.record{background:#ff6b6b; color:white;}
.controls{display:flex; gap:8px; align-items:center; margin-top:14px;}
.footer{font-size:12px; color:var(--muted); margin-top:8px;}
.theme-row{display:flex; gap:6px; margin-top:8px;}
.theme-swatch{width:28px; height:28px; border-radius:8px; cursor:pointer; border:2px solid #fff;}
.lottie-wrap{width:100%; max-width:340px; height:280px;}
@media(max-width:820px){.card{flex-direction:column}.left,.right{width:100%}}
</style>
</head>
<body>

<div class="card" id="cardRoot">
  <div class="left">
    <div class="lottie-wrap" id="lottieContainer"></div>
    <h1 id="greetTitle">Happy Birthday!</h1>
    <div class="small" id="greetSub">‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§∂ ‡§è‡§®‡§ø‡§Æ‡•á‡§∂‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§™‡§ï‡§æ ‡§®‡§ø‡§ú‡•Ä ‡§¨‡§∞‡•ç‡§•‡§°‡•á ‡§ï‡§æ‡§∞‡•ç‡§°</div>

    <div style="margin-top:12px; display:flex; gap:8px; align-items:center;">
      <audio id="bgMusic" loop>
        <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_0e3d4693e0.mp3?filename=upbeat-inspiring-ambient-111977.mp3" type="audio/mpeg">
      </audio>
      <button class="btn ghost" id="musicToggle">Play Music ‚ñ∂</button>
      <label style="font-size:13px; color:var(--muted); margin-left:6px;">(Optional)</label>
    </div>

    <div class="controls">
      <button class="btn small-btn record" id="startRecord">Record Video</button>
      <button class="btn small-btn ghost" id="stopRecord" disabled>Stop & Download</button>
      <div class="footer">Record: ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ï‡•á MediaRecorder ‡§∏‡•á MP4/WEBM ‡§¨‡§®‡•á‡§ó‡§æ (Chrome, Edge best)</div>
    </div>
  </div>

  <div class="right">
    <h1>üéÇ Birthday Wish Generator</h1>
    <div class="small">‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§è‡§®‡§ø‡§Æ‡•á‡§ü‡•á‡§° wish ‡§™‡§æ‡§è‡§Ç ‚Äî Copy ‡§Ø‡§æ WhatsApp ‡§ï‡§∞‡•á‡§Ç‡•§</div>

    <div class="input-row">
      <input id="nameInput" type="text" placeholder="‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡§ø‡§è (‡§â‡§¶‡§æ. Neha)">
      <button class="btn primary" id="genBtn">Wish Generate ‡§ï‡§∞‡•ã</button>
    </div>

    <div class="wish-box" id="wishBox">
      <div id="typedText" style="font-size:18px; color:#2b1830;">‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§∂ ‡§µ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...</div>
    </div>

    <div class="actions">
      <button class="small-btn copy" id="copyBtn">Copy</button>
      <a id="waLink" target="_blank"><button class="small-btn share">WhatsApp Share</button></a>
      <button class="small-btn ghost" id="surpriseBtn">Surprise Animation</button>
    </div>

    <div style="margin-top:8px;">
      <div class="small">‡§•‡•Ä‡§Æ ‡§ö‡•Å‡§®‡•á‡§Ç:</div>
      <div class="theme-row">
        <div class="theme-swatch" title="Pink" style="background:#ff4da6" data-color="#ff4da6"></div>
        <div class="theme-swatch" title="Purple" style="background:#8e44ad" data-color="#8e44ad"></div>
        <div class="theme-swatch" title="Gold" style="background:#d4af37" data-color="#d4af37"></div>
        <div class="theme-swatch" title="Turquoise" style="background:#1abc9c" data-color="#1abc9c"></div>
      </div>
    </div>

    <div style="margin-top:10px;">
      <div class="small">Quick funny templates:</div>
      <select id="funnySelect" style="padding:8px; border-radius:8px; margin-top:6px; width:100%;">
        <option value="0">Normal Sweet Wishes</option>
        <option value="1">Funny ‚Äì Cake Alert</option>
        <option value="2">Funny ‚Äì Party Warning</option>
        <option value="3">Cute ‚Äì Selfie Star</option>
      </select>
    </div>

  </div>
</div>

<script>
// -------- Lottie init (example animation via URL) ----------
const lottieContainer = document.getElementById('lottieContainer');
const anim = lottie.loadAnimation({
  container: lottieContainer,
  renderer: 'svg',
  loop: true,
  autoplay: true,
  path: 'https://assets8.lottiefiles.com/packages/lf20_jbrw3hcz.json' // sample birthday animation
});

// -------- Typing effect (simple) ----------
function typeText(text, el, speed=30){
  el.innerHTML = "";
  let i=0;
  const t = setInterval(()=>{
    if(i<text.length){ el.innerHTML += text.charAt(i); i++; }
    else clearInterval(t);
  }, speed);
}

// -------- Wishes templates ----------
function buildWishes(name, mode=0){
  name = name || "Friend";
  const templates = {
    0:[
      `üéâ Happy Birthday ${name}! üéÇ ‡§π‡§Æ‡•á‡§∂‡§æ ‡§Æ‡•Å‡§∏‡•ç‡§ï‡•Å‡§∞‡§æ‡§§‡•á ‡§∞‡§π‡•ã ‡§î‡§∞ ‡§ú‡§º‡§ø‡§Ç‡§¶‡§ó‡•Ä ‡§Æ‡•á‡§Ç ‡§¢‡•á‡§∞ ‡§∏‡§æ‡§∞‡•Ä ‡§ñ‡•Å‡§∂‡§ø‡§Ø‡§æ‡§Å ‡§™‡§æ‡§ì‡•§`,
      `‚ú® HBD ${name} ‚ú® ‚Äì ‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§ø‡§® ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§π‡•Å‡§§ ‡§ñ‡§æ‡§∏ ‡§π‡•ã!`
    ],
    1:[
      `üéÇ ${name}, ‡§ï‡•á‡§ï ‡§ï‡§æ‡§ü‡•ã ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§µ‡§∞‡§®‡§æ ‡§Æ‡•à‡§Ç ‡§ñ‡§æ ‡§ú‡§æ‡§ä‡§Å‡§ó‡§æ! üòÇ`,
      `üç∞ Warning: ${name} ‡§®‡•á ‡§ï‡•á‡§ï ‡§ï‡§æ ‡§¨‡§°‡§º‡§æ ‡§ü‡•Å‡§ï‡§°‡§º‡§æ ‡§õ‡§ø‡§™‡§æ ‡§∞‡§ñ‡§æ ‡§π‡•à‚Äîinvestigate ‡§ï‡§∞‡•ã!`
    ],
    2:[
      `ü•≥ ${name}, ‡§Ö‡§ó‡§∞ ‡§™‡§æ‡§∞‡•ç‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§®‡§æ‡§ö‡•á‡§Ç ‡§§‡•ã DJ ‡§¨‡•ç‡§∞‡•á‡§ï‡§´‡§æ‡§∏‡•ç‡§ü ‡§¶‡•á ‡§¶‡•á‡§ó‡§æ!`,
      `üîä Attention: ${name} ‡§ï‡•Ä ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§∏‡•á ‡§™‡§æ‡§∞‡•ç‡§ü‡•Ä 100% ‡§´‡•Å‡§≤-‡§™‡§æ‡§µ‡§∞ ‡§π‡•ã‡§ó‡•Ä!`
    ],
    3:[
      `üì∏ ${name}, ‡§Ü‡§ú ‡§Ü‡§™ Selfie Queen ‡§π‡•ã ‚Äî ‡§≤‡§æ‡§á‡§ü, Camera, Smile!`,
      `üíñ ${name}, ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§® ‡§ï‡§æ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§®‡•á‡§ö‡§∞ ‡§π‡•à!`
    ]
  };
  return templates[mode] || templates[0];
}

// -------- Generate flow ----------
const genBtn = document.getElementById('genBtn');
const nameInput = document.getElementById('nameInput');
const typedText = document.getElementById('typedText');
const copyBtn = document.getElementById('copyBtn');
const waLink = document.getElementById('waLink');
const surpriseBtn = document.getElementById('surpriseBtn');
const funnySelect = document.getElementById('funnySelect');
const greetTitle = document.getElementById('greetTitle');

genBtn.addEventListener('click', ()=> {
  const name = nameInput.value.trim() || "Friend";
  const mode = parseInt(funnySelect.value || "0");
  const arr = buildWishes(name, mode);
  // pick random
  const pick = arr[Math.floor(Math.random()*arr.length)];
  // typing
  typeText(pick, typedText, 24);
  // confetti burst
  confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 }});
  // update share links
  waLink.href = `https://wa.me/?text=${encodeURIComponent(pick)}`;
  greetTitle.innerText = `Happy Birthday, ${name}!`;
});

// copy
copyBtn.addEventListener('click', ()=>{
  const txt = typedText.innerText || "";
  if(!txt){ alert("‡§™‡§π‡§≤‡•á Wish Generate ‡§ï‡§∞‡•á‡§Ç."); return; }
  navigator.clipboard.writeText(txt);
  alert("‚úÖ Wish copied to clipboard!");
});

// surprise animation
surpriseBtn.addEventListener('click', ()=>{
  // quick camera shake via lottie speed + confetti stream
  anim.setSpeed(1.6);
  confetti({ particleCount: 220, spread: 90, origin: { y: 0.4 }});
  setTimeout(()=> anim.setSpeed(1.0), 1100);
});

// theme swatches
document.querySelectorAll('.theme-swatch').forEach(s=>{
  s.addEventListener('click', ()=> {
    const color = s.getAttribute('data-color');
    document.documentElement.style.setProperty('--accent', color);
  });
});

// music toggle
const musicBtn = document.getElementById('musicToggle');
const bgMusic = document.getElementById('bgMusic');
musicBtn.addEventListener('click', ()=>{
  if(bgMusic.paused){ bgMusic.play(); musicBtn.innerText='Music: ON üîä'; }
  else { bgMusic.pause(); musicBtn.innerText='Play Music ‚ñ∂'; }
});

// -------- Recording animation (MediaRecorder) ----------
let recorder, recordedChunks = [];
const startRecord = document.getElementById('startRecord');
const stopRecord = document.getElementById('stopRecord');
const cardRoot = document.getElementById('cardRoot');

startRecord.addEventListener('click', async ()=>{
  recordedChunks = [];
  // capture the card element as a stream
  const stream = cardRoot.captureStream ? cardRoot.captureStream(30) : cardRoot.mozCaptureStream ? cardRoot.mozCaptureStream(30) : null;
  if(!stream){ alert("‡§Ü‡§™‡§ï‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç captureStream ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ Chrome/Edge ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§∞‡•á‡§Ç."); return; }
  recorder = new MediaRecorder(stream, {mimeType: 'video/webm; codecs=vp9'});
  recorder.ondataavailable = e => { if(e.data.size) recordedChunks.push(e.data); };
  recorder.onstop = ()=> {
    const blob = new Blob(recordedChunks, {type:'video/webm'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `birthday-wish-${Date.now()}.webm`;
    a.click();
    URL.revokeObjectURL(url);
  };
  recorder.start();
  startRecord.disabled = true;
  stopRecord.disabled = false;
  startRecord.innerText = 'Recording...';
});

stopRecord.addEventListener('click', ()=>{
  if(recorder && recorder.state==='recording') recorder.stop();
  startRecord.disabled = false;
  stopRecord.disabled = true;
  startRecord.innerText = 'Record Video';
});

// Auto-generate example on load
window.addEventListener('load', ()=> {
  nameInput.value = "Friend";
  genBtn.click();
});
</script>

</body>
</html>